## 의존성 주입
#### 의존성 주입이란? 의존하는 객체를 직접 생성하거나 관리하지 않고 외부에서 주입받는 것
#### 의존한다는 것 = 다른 클래스의 인스턴스나 메서드를 사용한다는 것

-----
#### 의존성 주입을 해야하는 이유
- test가 용이
- 코드의 재사용성 높임
- 객체 간의 의존성을 줄임
- 객체 간의 결합도를 낮춤 -> 유연한 코드 작성
#### 의존성 주입의 3가지 방법
- 필드 주입
- 생성자 주입
- 수정자 주입
-----
#### 필드 주입
- 필드에 바로 의존 관계를 주입하는 방법
- 가장 쉬움, 하지만 현재는 지양
- 외부에서 접근이 불가 -> 결합도가 높아짐
- final 키워드 사용 불가 -> 불변성 확보 X
-----
#### 생성자 주입
- 클래스의 생성자를 통해 주입하는 방법 -> 의존당하는 클래스의 생성자에 의존되는 객체를 인자로 넣는 방식
- 가장 권장되는 주입 방법임 -> private과 final 키워드를 통해 안정성과 불변성을 보장하기 위함
    - private : 외부에서 직접 접근할 수 없음, 주입된 값을 통해 필드에 접근 -> 의도치않은 변경이나 오용을 방지
    - final : final로 선언하면 생성된 이후에 값을 변경할 수 없음 = 불변 객체. 객체의 상태가 변경되지 않으므로 안정성 확보
- test에 용이함 => 이 방법은 의존 중인 객체가 하나라도 없으면 만들어지지 않음 -> 컴파일 단계에서 미리 캐치
- 순환 참조 에러 방지 = 서로 의존하는 에러를 방지
-----
#### 수정자 주입
- setter 방식 => public => 안정성 확보 X
- 결합도를 낮출 수는 있음
- 결정적으로 이 메서드를 거치지 않고서도 의존당하는 객체를 생성할 수 있음
- final 키워드를 사용할 수 없음
-----
결론
- 불변성과 안정성 확보를 위해 생성자 주입 방식 사용
- 순환 참조를 방지
- 실제 Spring Team에서도 생성자 주입 방식을 권장함



++ 생성자 주입 방식이 test에 용이한 이유
- 컴파일 시점에 객체를 주입받아 테스트 코드를 작성
- 주입하는 객체가 누락된 경우 컴파일 시점에서 오류를 발견할 수 있음
- test를 위해 만든 test 객체를 생성자로 넣어 편리함을 얻을 수 있음

++ 순환 참조란
- 둘 이상의 클래스나 빈이 서로를 참조하는 상황
  - ex) A가 B를 참조 -> B가 C를 참조 -> C가 A를 참조
- 순환 참조가 발생하면 객체 생성 시점에서 무한루프에 빠짐
- 객체 간의 의존성을 최소화하고 의존성 주입 방식을 적절히 택해야 함